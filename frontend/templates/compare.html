{% extends 'base.html' %}
{% load staticfiles %}
{% load crispy_forms_tags %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
{% endblock %}


{% block content %}
<div class="wrapper">
    <!-- Sidebar -->
    <nav id="sidebar">
        <form method="POST">
          {% csrf_token %}
          {{ form | crispy }}
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </nav>

    <!-- Page Content  -->
    <div id="content">
        <br><br>
        <button type="button" id="sidebarCollapse" class="btn btn-info">
            <i class="fas fa-align-left"></i>
            <span>Set Attributes</span>
        </button>
        <br>

        <nav id="subnav" class="navbar navbar-expand-lg navbar-light bg-light">
              <ul id="subnav" class="navbar-nav">
                    <li class="nav-item active">
                      <a class="nav-link" href="#">All</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">On Demand</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Reserved</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Spot</a>
                    </li>

              </ul>
        </nav>

        <table id="instances" class="table table-striped table-bordered" style="width:100%">
                <thead>
                    <tr>
                        <th>Instance</th>
                        <!-- <th>Provider</th> -->
                        <th>Region</th>
                        <th>Operating System</th>
                        <th>VCPUs</th>
                        <th>Memory</th>
                        <!-- <th>ECU</th> -->
                        <th>Price Type</th>
                        <th>Price</th>
                        <th>Price Unit</th>
                    </tr>
                </thead>
                <tbody>

                {% for instance in instances %}
                  <tr>
                    <td>{{ instance.instance_type }}</td>
                    <!-- <td>{{ instance.provider }}</td> -->
                    <td>{{ instance.region }}</td>
                    <td>{{ instance.operating_system }}</td>
                    <td>{{ instance.vcpus }}</td>
                    <td>{{ instance.memory }}</td>
                    <!-- <td>{{ instance.ecu }}</td> -->
                    <td>{% if instance.price_type == 'on_demand' %}on demand{% endif %}</td>
                    <td>${{ instance.price | floatformat:3 }}</td>
                    <td>{{ instance.price_unit }}</td>
                  </tr>
                  {% endfor %}

                </tbody>
                <tfoot>
                    <tr>
                      <th>Instance</th>
                      <!-- <th>Provider</th> -->
                      <th>Region</th>
                      <th>Operating System</th>
                      <th>VCPUs</th>
                      <th>Memory</th>
                      <!-- <th>ECU</th> -->
                      <th>Price Type</th>
                      <th>Price</th>
                      <th>Price Unit</th>
                    </tr>
                </tfoot>
            </table>

        <br><br>

        <button type="button" id="comparebutton" class="btn btn-info">
            <span>Compare</span>
        </button>

        <div class="line"></div>

        <div class="comparecards">
          <div class="row">

            <div class="column">
              <div class="card">
                <div class="container">
                  <p> card1 </p>
                </div>
              </div>
            </div>

            <div class="column">
              <div class="card">
                <div class="container">
                  <p> card2 </p>
                </div>
              </div>
            </div>

            <div class="column">
              <div class="card">
                <div class="container">
                  <p> card3 </p>
                </div>
              </div>
            </div>

          </div>
      </div>

    </div>

</div>



{% endblock %}


{% block script %}
<!-- SIDE BAR -->
<script type="text/javascript">
    $(document).ready(function () {
        $("#sidebar").mCustomScrollbar({
            theme: "minimal"
        });

        $('#sidebarCollapse').on('click', function () {
            $('#sidebar, #content').toggleClass('active');
            $('.collapse.in').toggleClass('in');
            $('a[aria-expanded=true]').attr('aria-expanded', 'false');
        });
    });
</script>

<!-- BOOTSTRAP TABLE -->
<script type="text/javascript">
  $(document).ready(function() {
    $('#instances').DataTable( {
        // "paging":   false,
        "ordering": true,
        // "info":     false,
        "columns": [
            {"type": "string"},
            {"type": "string"},
            {"type": "string"},
            {"type": "num"},
            {"type": "num"},
            {"type": "string"},
            {"type": "num"},
            {"type": "string"},
        ]
    } );
  } );
</script>

<!-- SELECTION -->
<script type="text/javascript">
  $(document).ready(function() {
    var table = $('#instances').DataTable();

    $('#instances tbody').on( 'click', 'tr', function () {
        $(this).toggleClass('selected');
    } );

    $('#comparebutton').on('click', function () {
        var selected = document.querySelectorAll('selected');
        for (var i = 0; i < selected.length; ++i) {
           selected[i].style.backgroundColor = red;
        }
    } );
  } );
</script>


{% endblock %}
